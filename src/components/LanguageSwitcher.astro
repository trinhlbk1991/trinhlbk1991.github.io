---
interface Props {
  lang: 'en' | 'vi';
}

const { lang } = Astro.props;
const currentPath = Astro.url.pathname;

let targetPath = '';
let flag = '';
let ariaLabel = '';

if (lang === 'en') {
  // Switch to Vietnamese
  if (currentPath === '/') {
    targetPath = '/vi/';
  } else {
    targetPath = `/vi${currentPath}`;
  }
  flag = 'ðŸ‡»ðŸ‡³';
  ariaLabel = 'Switch to Vietnamese';
} else {
  // Switch to English
  targetPath = currentPath.replace(/^\/vi/, '') || '/';
  flag = 'ðŸ‡ºðŸ‡¸';
  ariaLabel = 'Switch to English';
}
---

<a 
  href={targetPath} 
  class="p-2 rounded-lg text-content-muted hover:text-primary hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors flex items-center justify-center"
  aria-label={ariaLabel}
  title={ariaLabel}
>
  <span class="text-2xl leading-none">{flag}</span>
</a>
